<!-- Load Google Publisher Tag (GPT) -->
<script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

<script>
  alert("üöÄ Initializing rewarded ad setup...");

  window.googletag = window.googletag || {cmd: []};

  googletag.cmd.push(function() {
    alert("üì¢ Defining rewarded ad slot...");

    // Define the rewarded ad slot
    var rewardedSlot = googletag.defineOutOfPageSlot(
      '/23286994098/rewardadproxe1', // Ad Unit Path from your setup
      googletag.enums.OutOfPageFormat.REWARDED
    );

    if (rewardedSlot) {
      alert("‚úÖ Rewarded ad slot successfully created.");
      rewardedSlot.addService(googletag.pubads());

      // Enable the button when the ad is ready
      googletag.pubads().addEventListener('rewardedSlotReady', function(event) {
        document.getElementById('rewarded-ad-button').disabled = false;
        alert("üé• Rewarded ad is ready! Click the button to watch.");
      });

      // Grant the reward when the user finishes watching the ad
      googletag.pubads().addEventListener('rewardedSlotGranted', function(event) {
        alert("üéâ Congratulations! You‚Äôve earned your reward!");
      });

      googletag.enableServices();
      alert("üîÑ Rewarded ad setup completed. Waiting for ad to load...");
    } else {
      alert("‚ùå Failed to define rewarded ad slot. Check your Google Ad Manager settings.");
    }
  });

  function showRewardedAd() {
    alert("üì¢ Requesting rewarded ad...");

    googletag.cmd.push(function() {
      var slot = googletag.pubads().getSlots().find(slot => slot.getAdUnitPath() === '/23286994098/rewardadproxe1');
      if (slot) {
        alert("üé• Found rewarded ad slot, attempting to show ad...");

        slot.getRewardedAd().then(ad => {
          alert("üì∫ Showing rewarded ad...");
          ad.show();
        }).catch(error => {
          alert("‚ùå Error showing rewarded ad: " + error.message);
        });
      } else {
        alert("‚ö†Ô∏è Rewarded ad slot not found.");
      }
    });
  }
</script>

<!-- Rewarded Ad Button -->
<button id="rewarded-ad-button" onclick="showRewardedAd()" disabled>Watch Ad for Reward</button>
