<!-- Load Google Publisher Tag (GPT) -->
<script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

<script>
  alert("üöÄ Initializing rewarded ad setup...");

  window.googletag = window.googletag || {cmd: []};

  function setupRewardedAd() {
    alert("üì¢ Attempting to define rewarded ad slot...");

    // Ensure GPT is loaded
    if (!googletag.pubads) {
      alert("‚ùå Google Publisher Tag (GPT) is not available. Retrying in 2 seconds...");
      setTimeout(setupRewardedAd, 2000); // Retry after 2 seconds
      return;
    }

    // Define the rewarded ad slot using your ad unit path
    var rewardedSlot = googletag.defineOutOfPageSlot(
      '/23286140618/rewardadproxe1', // Your Ad Unit Path
      googletag.enums.OutOfPageFormat.REWARDED
    );

    if (rewardedSlot) {
      alert("‚úÖ Rewarded ad slot successfully created.");
      rewardedSlot.addService(googletag.pubads());

      // Enable the button when the ad is ready
      googletag.pubads().addEventListener('rewardedSlotReady', function() {
        document.getElementById('rewarded-ad-button').disabled = false;
        alert("üé• Rewarded ad is ready! Click the button to watch.");
      });

      // Grant the reward when the user finishes watching the ad
      googletag.pubads().addEventListener('rewardedSlotGranted', function() {
        alert("üéâ Congratulations! You‚Äôve earned your reward!");
      });

      googletag.enableServices();
      alert("üîÑ Rewarded ad setup complete.");
    } else {
      alert("‚ùå Failed to define rewarded ad slot.");
    }
  }

  // Run the setup when the GPT library is loaded
  googletag.cmd.push(setupRewardedAd);

  function showRewardedAd() {
    alert("üì¢ Requesting rewarded ad...");

    googletag.cmd.push(function() {
      var slot = googletag.pubads().getSlots().find(slot => slot.getAdUnitPath() === '/23286140618/rewardadproxe1');
      if (slot) {
        alert("üé• Found rewarded ad slot, attempting to show ad...");

        slot.getRewardedAd().then(ad => {
          alert("üì∫ Showing rewarded ad...");
          ad.show();
        }).catch(error => {
          alert("‚ùå Error showing rewarded ad: " + error.message);
        });
      } else {
        alert("‚ö†Ô∏è Rewarded ad slot not found.");
      }
    });
  }
</script>

<!-- Rewarded Ad Button -->
<button id="rewarded-ad-button" onclick="showRewardedAd()" disabled>Watch Ad for Reward</button>
