<!-- Load GPT Library -->
<script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

<script>
  window.googletag = window.googletag || {cmd: []};

  googletag.cmd.push(function() {
    // Define a rewarded ad slot
    var rewardedSlot = googletag.defineOutOfPageSlot(
      '/23286994098/rewardadproxe', // Replace with your actual ad unit
      googletag.enums.OutOfPageFormat.REWARDED
    );

    if (rewardedSlot) {
      rewardedSlot.addService(googletag.pubads());

      // Enable the button when the rewarded ad is ready
      googletag.pubads().addEventListener('rewardedSlotReady', function(event) {
        document.getElementById('rewarded-ad-button').disabled = false;
        alert("‚úÖ Rewarded ad is ready! Click the button to watch.");
      });

      // Grant the reward when the user finishes watching the ad
      googletag.pubads().addEventListener('rewardedSlotGranted', function(event) {
        alert("üéâ Congratulations! You‚Äôve earned your reward!");
        // Add logic to grant the reward (e.g., extra game life, coins, access, etc.)
      });

      googletag.enableServices();
      alert("üîÑ Rewarded ad setup initialized.");
    } else {
      alert("‚ùå Failed to define rewarded ad slot.");
    }
  });

  function showRewardedAd() {
    alert("üì¢ Requesting rewarded ad...");
    
    googletag.cmd.push(function() {
      var slot = googletag.pubads().getSlots().find(slot => slot.getAdUnitPath() === '/23286994098/rewardadproxe');
      if (slot) {
        slot.getRewardedAd().then(ad => {
          alert("üé• Showing rewarded ad...");
          ad.show();
        }).catch(error => {
          alert("‚ùå Error showing rewarded ad: " + error.message);
        });
      } else {
        alert("‚ö†Ô∏è Rewarded ad slot not found.");
      }
    });
  }
</script>

<!-- Rewarded Ad Button -->
<button id="rewarded-ad-button" onclick="showRewardedAd()" disabled>Watch Ad for Reward</button>
